# IP 주소 (Internet Protocol Address)
> 인터넷 상에서 ‘패킷이 어디로 가야 하는지’를 식별하기 위한 전 세계 공통 주소 체계
- 사람 주소 → 도로명주소
- 네트워크 주소 → IP 주소
# ARP (Address Resolution Protocol)
- <img width="477" height="225" alt="image" src="https://github.com/user-attachments/assets/4435872b-29a4-40de-96a7-c5c094ed4f07" />
- <img width="509" height="347" alt="image" src="https://github.com/user-attachments/assets/69b91ed3-d59d-4fde-9bfe-886db188a78e" />

> IP 주소 → MAC 주소로 변환해주는 프로토콜
- 왜 필요?
  - IP는 ‘논리 주소’
  - MAC은 ‘물리 주소’
  - 스위치(or NIC)는 MAC 주소를 기반으로 프레임을 전송함
  - → 따라서 IP 패킷을 전송하려면 먼저 MAC을 알아야 한다.
- 동작 과정 (간단)
  - ARP 요청(Broadcast): “192.168.0.5 누구니?”
  - 해당 호스트가 ARP 응답(Unicast): “내 MAC은 xx:yy:zz다!”
  - 이후 캐시에 저장(ARP Cache)
- 용어
  - **브로드캐스트(Broadcast)** : 같은 네트워크(LAN)에 있는 모든 장비에게 보내는 메시지
  - **유니캐스트(Unicast)** : 특정 1명의 장비에게만 보내는 전송
# 홉바이홉 통신 (Hop-by-Hop)
<img width="537" height="304" alt="image" src="https://github.com/user-attachments/assets/ffadf400-1137-49fb-ae16-405b8db4213c" />

> 패킷은 전체 경로를 한 번에 아는 게 아니라, ‘다음 라우터(next hop)’만 알고 이동한다
- 다음에 어디로 갈지만 결정하면서 점프를 반복하는 구조
  - 출발지 → 라우터 1 → 라우터 2 → … → 목적지
  - 각 단계가 하나의 ‘Hop’
- 왜 이렇게 설계?
  - 인터넷은 수천~수만 개의 라우터로 연결
  - 중간 경로는 수시로 변함(망 장애, 트래픽 우회 등)
  - 경로를 미리 확정하면 유지할 수 없음
- 용어
  - **라우팅** : 패킷의 다음 목적지를 결정하는 과정
## 라우팅 테이블 (Routing Table)
> 어떤 IP 대역은 어느 라우터로 보내야 하는가’를 저장한 표
- 라우터, OS, 심지어 PC에도 있다.
### 예시:
<img width="422" height="83" alt="image" src="https://github.com/user-attachments/assets/32d97a8e-c5c5-43a8-9ed2-d34004dc4f50" />

- 0.0.0.0/0 : 모든 네트워크(기본경로)
- 192.168.0.0/24 : 내 로컬 LAN은 직접 통신
- 나머지는 Gateway로 보냄
## 게이트웨이 (Gateway)
<img width="489" height="156" alt="image" src="https://github.com/user-attachments/assets/20cd89c7-b58d-4a91-93a5-15c6bcddca6e" />

> 로컬 네트워크에서 외부 네트워크로 나가는 ‘출구’ 역할
- 일반 가정에서는 ‘공유기’가 게이트웨이
- IP 패킷이 목적지가 로컬망이 아닐 경우 → 무조건 게이트웨이로 보냄
- LAN 내부 통신은 ARP로 MAC을 얻어서 직접 통신할 수 있다.
- LAN을 벗어난 목적지는 MAC주소도 알 수 없고, ARP 브로드캐스트도 LAN 밖으로 나가지 않으니, 게이트웨이로 보낸다
# IP 주소 체계
> 네트워크에서 장비를 식별하는 논리 주소 체계

| 버전       | 비트 수  | 주소 개수   |
| -------- | ----- | ------- |
| **IPv4** | 32비트  | 약 43억 개 |
| **IPv6** | 128비트 | 사실상 무한대 |

https://43434.tistory.com/282
## 클래식 기반 할당 방식 (Classful network addressing)
- <img width="458" height="209" alt="image" src="https://github.com/user-attachments/assets/b0fbadd2-cf48-4492-9d7d-dee9740b0d4d" />
- <img width="525" height="326" alt="image" src="https://github.com/user-attachments/assets/cfc60575-d64c-4872-aa7f-4fe4c31f2a59" />
- <img width="613" height="178" alt="image" src="https://github.com/user-attachments/assets/fac2c8cb-6c60-4ae4-88cb-015205888c02" />

| 클래스 | 비트 패턴 (앞부분) | 네트워크/호스트 비트 | 주소 범위                     | 특징      |
| --- | ----------- | ----------- | ------------------------- | ------- |
| A   | 0xxxxxxx    | N:8 / H:24  | 0.0.0.0 ~ 127.255.255.255 | 대형 네트워크 |
| B   | 10xxxxxx    | N:16 / H:16 | 128~191.x.x.x             | 중형      |
| C   | 110xxxxx    | N:24 / H:8  | 192~223.x.x.x             | 소형      |
| D   | 1110xxxx    | 멀티캐스트       |                           |         |
| E   | 1111xxxx    | 연구용         |                           |         |

> 고정된 네트워크/호스트 비트로 클래스 구분한 주소 방식
- **문제점**: 대역이 너무 고정돼서 낭비가 심함 (300개 호스트 필요하면 C(254)에 가까운데 B(6만5천)를 할당해야 함)
- ↓
- **CIDR(Classless)** 방식이 등장
## DHCP (Dynamic Host Configuration Protocol)
> IP 등 네트워크 설정을 자동으로 부여하는 프로토콜
- 수동 입력의 불편함 해결.
- DHCP가 주는 정보:
  - IP 주소
  - 서브넷 마스크
  - 기본 게이트웨이
  - DNS 서버
  - 등등 
## NAT (Network Address Translation) 
<img width="763" height="429" alt="image" src="https://github.com/user-attachments/assets/3774207c-2c43-4d0f-8137-a431b69a5c17" />

> 내부 사설 IP들을 한 개의 공인 IP로 변환하는 기술
- 왜 필요?
  - IPv4 주소 부족
  - 보안 측면의 이점
### 공유기와 NAT
### NAT를 이용한 보안
### NAT의 단점
# IP 주소를 이용한 위치 정보
